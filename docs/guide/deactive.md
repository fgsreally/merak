# 销毁
微前端的应用销毁一直是个麻烦的地方

默认情况下,`merak`只会执行钩子，并把dom放进缓存，事件也没有清除（姑且可以理解为`keep-alive`

当需要再彻底一点的清除，这个时候在卸载钩子中：
```ts
$onUnmount(() => {
  // ..
  $deactive()
})
```
这样会彻底清除`dom`以及事件

### 进阶
上述的经验足以应付大多数情况，但如果有进一步的需求有必要了解一下原理：`merak`只会通知你`挂载/卸载`,并不会帮你做任何事情，你应该手动在钩子中进行挂载、卸载的准备（钩子目前是通过`addEventListener`实现，但我不确定这是否是好的），

`merak-helper`会提供连两个帮助函数：`$deactive`,`$destroy`，前者是将现有的`dom`转为`innerHtml`（`webpack`在开发时`style-loader`就会导致问题，详见`issue`），而后者则是完全删除`merak`实例(尽量不要使用，我个人认为它完全没有任何良性的作用)。这两者都不一定可靠！

如果出现完全无法解决的问题，请考虑使用[iframe模式](./mode.md#iframe模式)，每一个应用单独享有一个`iframe`，卸载时`iframe`销毁，这和无界的重建模式是一样的

> 这并非是一件没有意义的事情（虽然性能确实会降低至`iframe`,或许会强一点？毕竟`css`啥的还是缓存了），相比于使用`iframe`，至少我有可操作的`dom`，弹窗等全局样式，方便的状态、方法共享，不用考虑同源...更关键的是，很多其他工具，如可视化测试、录屏，不支持iframe（至少开源版本如此）
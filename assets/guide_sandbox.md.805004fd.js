import{_ as e,o as a,c as o,Q as s}from"./chunks/framework.31d25865.js";const E=JSON.parse('{"title":"隔离变量","description":"","frontmatter":{},"headers":[],"relativePath":"guide/sandbox.md","filePath":"guide/sandbox.md","lastUpdated":1719584296000}'),c={name:"guide/sandbox.md"},t=s(`<h1 id="隔离变量" tabindex="-1">隔离变量 <a class="header-anchor" href="#隔离变量" aria-label="Permalink to &quot;隔离变量&quot;">​</a></h1><p>沙箱的原理，是将一些变量隔离，以<code>document</code>为例：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">document</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fakeGlobalVar</span></span>
<span class="line"><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">document</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fakeGlobalVar</span></span>
<span class="line"><span style="color:#24292E;">document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;">)</span></span></code></pre></div><p>这个时候读到的<code>document</code>就是沙箱中的<code>document</code>了</p><blockquote><p>以下部分可在<code>vite/webpack</code>插件配置中看到</p></blockquote><h2 id="原生隔离变量" tabindex="-1">原生隔离变量 <a class="header-anchor" href="#原生隔离变量" aria-label="Permalink to &quot;原生隔离变量&quot;">​</a></h2><p><code>nativeVars</code>是指像<code>document</code>一样，原生就存在的变量</p><h2 id="自定义隔离变量" tabindex="-1">自定义隔离变量 <a class="header-anchor" href="#自定义隔离变量" aria-label="Permalink to &quot;自定义隔离变量&quot;">​</a></h2><p><code>customVars</code>是指自定义的全局变量，比如<code>window.a</code></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>nativeVars</code>和 <code>customVars</code>详见<code>vite</code>/<code>webpack</code>的插件配置</p><p>其中<code>nativeVars</code>默认为 <code>[&#39;document&#39;, &#39;history&#39;, &#39;location&#39;, &#39;window&#39;, &#39;self&#39;, &#39;globalThis&#39;, &#39;setTimeout&#39;, &#39;setInterval&#39;, &#39;addEventListener&#39;</code></p><p><code>customVars</code>默认为空</p><p>如果你需要一些其他变量被隔离，修改插件配置即可</p></div>`,10),n=[t];function l(p,d,r,i,u,h){return a(),o("div",null,n)}const _=e(c,[["render",l]]);export{E as __pageData,_ as default};
